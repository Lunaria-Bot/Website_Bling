{% extends "base.html" %}
{% block title %}Submit Card{% endblock %}

{% block content %}
<div class="container-xl">
  <h1 class="page-title text-center mb-5" data-aos="fade-down">Submit a New Card</h1>

  <div class="row justify-content-center">
    <div class="col-lg-8" data-aos="fade-up">
      <form method="POST" action="{{ url_for('submit_card') }}" enctype="multipart/form-data" class="glass-card p-4">
        <div class="mb-3">
          <label class="form-label text-light">Card Title</label>
          <input type="text" name="title" class="form-control bg-dark text-light border-secondary" required>
        </div>

        <div class="mb-3">
          <label class="form-label text-light">Description</label>
          <textarea name="description" rows="3" class="form-control bg-dark text-light border-secondary" required></textarea>
        </div>

        <div class="mb-3">
          <label class="form-label text-light">Form Type</label>
          <select name="form_type" class="form-select bg-dark text-light border-secondary" required>
            <option value="base">Base</option>
            <option value="awakened">Awakened</option>
            <option value="event">Event</option>
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label text-light">Image Upload</label>
          <input type="file" name="image" accept="image/*" class="form-control bg-dark text-light border-secondary" onchange="previewImage(event)" required>
        </div>

        <div class="text-center mb-3">
          <img id="imagePreview" src="/static/default_preview.png" alt="Preview" class="img-fluid rounded" style="max-height: 240px;">
        </div>

        <div class="text-end">
          <button type="submit" class="btn btn-success px-4">Submit</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  function previewImage(event) {
    const reader = new FileReader();
    reader.onload = function () {
      const output = document.getElementById('imagePreview');
      output.src = reader.result;
    };
    reader.readAsDataURL(event.target.files[0]);
  }
</script>
{% endblock %}
